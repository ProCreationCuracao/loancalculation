:root {
  --bg: #f5f5f7;
  --fg: #263238;
  --primary: #ec407a;
  --card-bg: #fff;
}

* { box-sizing:border-box; margin:0; padding:0; }
body {
  font-family:-apple-system,BlinkMacSystemFont,sans-serif;
  background:var(--bg); color:var(--fg);
  padding-bottom:env(safe-area-inset-bottom);
  line-height:1.6;
}

/* Header & nav */
header {
  display:flex; align-items:center; justify-content:center;
  background:var(--primary); color:#fff; padding:12px;
}
.logo { height:32px; margin-right:8px; }
.segmented-control {
  display:flex; margin:8px; background:var(--card-bg);
  border-radius:8px; overflow:hidden;
  box-shadow:0 1px 3px rgba(0,0,0,0.1);
}
.segmented-control button {
  flex:1; padding:8px; border:none;
  background:transparent; color:var(--fg);
  cursor:pointer; transition:background .2s;
}
.segmented-control button.active {
  background:var(--primary); color:#fff;
}

/* Tabs */
.tab { display:none; padding:0 16px; }
.tab.active { display:block; }

/* Cards grid */
.cards {
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(140px,1fr));
  gap:12px; margin:16px 0;
  overflow-x:auto; padding-bottom:8px;
}
.cards::-webkit-scrollbar { height:6px; }
.cards::-webkit-scrollbar-thumb {
  background:rgba(0,0,0,0.1); border-radius:3px;
}
.card {
  background:var(--card-bg);
  border-radius:12px; padding:16px;
  text-align:center;
  box-shadow:0 2px 6px rgba(0,0,0,0.1);
}
.card h3 { margin-bottom:8px; }
.card p  { font-size:20px; }

/* Charts */
.charts {
  display:grid; gap:16px; margin-bottom:16px;
}
@media(min-width:600px){
  .charts { grid-template-columns:1fr 1fr; }
}

/* Calculator */
.calc-container {
  background:var(--card-bg);
  border-radius:12px;
  padding:16px;
  box-shadow:0 2px 6px rgba(0,0,0,0.1);
  margin-bottom:16px;
}
.calc-container input,
.calc-container button {
  width:100%; padding:12px; margin-bottom:12px;
  border:1px solid #ccc; border-radius:8px;
}
.calc-container button {
  background:var(--fg); color:#fff;
}
.results {
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(120px,1fr));
  gap:12px; margin-bottom:16px;
}
.results div {
  background:var(--card-bg);
  border-radius:8px; padding:12px;
  box-shadow:0 1px 3px rgba(0,0,0,0.1);
}
.results .create-btn {
  grid-column:1/-1;
  background:var(--primary); color:#fff;
}
.schedule { overflow-x:auto; margin-top:16px; }
.total-interest {
  text-align:center;
  margin-top:12px;
  font-weight:bold;
  color:var(--primary);
}

/* Loans list */
.loan-filters {
  display:flex; gap:8px;
  margin:16px 0 8px;
}
.loan-filters input,
.loan-filters select {
  flex:1; padding:8px;
  border:1px solid #ccc; border-radius:8px;
}
.rules-btn {
  background:var(--primary); color:#fff;
  border:none; border-radius:8px;
  padding:8px 12px; cursor:pointer;
  transition:opacity .2s;
}
.rules-btn:hover { opacity:0.9; }

.loan-list {
  display:flex; flex-direction:column; gap:12px;
}

/* Loan card */
.loan-card {
  background:var(--card-bg);
  border-radius:12px;
  box-shadow:0 2px 6px rgba(0,0,0,0.1);
  overflow:hidden;
}
.loan-card-header {
  display:flex; justify-content:space-between;
  align-items:center; padding:12px; cursor:pointer;
}
.loan-name { font-weight:600; }
.status-pill {
  padding:4px 8px; border-radius:12px;
  font-size:12px; color:#fff; text-transform:capitalize;
}
.status-pill.active    { background:#42a5f5; }
.status-pill.completed { background:#66bb6a; }
.status-pill.overdue   { background:#e53935; }

.loan-card-body {
  display:none; padding:12px; font-size:14px;
}
.loan-card.expanded .loan-card-body {
  display:block;
}
.field {
  display:flex; justify-content:space-between;
  margin-bottom:8px;
}
.pay-btn {
  background:var(--primary); color:#fff;
  border:none; padding:8px 16px;
  border-radius:6px; cursor:pointer;
  margin-top:8px; transition:opacity .2s;
}
.pay-btn:hover { opacity:0.9; }

/* FAB */
.fab {
  display:none; position:fixed;
  bottom:calc(20px+env(safe-area-inset-bottom));
  right:20px; width:56px; height:56px;
  background:var(--primary); color:#fff;
  border:none; border-radius:50%;
  font-size:32px; cursor:pointer;
  box-shadow:0 4px 8px rgba(0,0,0,0.2);
  z-index:1001;
}

/* Modals */
.modal {
  position:fixed; inset:0;
  background:rgba(0,0,0,0.4);
  display:none; align-items:flex-end;
  z-index:1000;
}
.modal.show { display:flex; }
.bottom-sheet {
  background:var(--card-bg);
  border-top-left-radius:16px;
  border-top-right-radius:16px;
  padding:16px; width:100%;
  max-height:80vh;
  transform:translateY(100%);
  transition:transform .3s ease-out;
}
.modal.show .bottom-sheet {
  transform:translateY(0);
}
.sheet-handle {
  width:40px; height:4px;
  background:#ccc; border-radius:2px;
  margin:0 auto 16px;
}
.form-group { margin-bottom:12px; }
.form-group input, textarea {
  width:100%; padding:12px;
  border:1px solid #ccc; border-radius:8px;
}
.sheet-btn {
  width:100%; padding:14px;
  background:var(--primary); color:#fff;
  border:none; border-radius:8px;
  cursor:pointer; transition:opacity .2s;
}
.sheet-btn:hover { opacity:0.9; }

/* Rules view */
.rules-content {
  max-height:50vh; overflow-y:auto;
  font-size:14px; line-height:1.5;
  margin-bottom:16px;
}
.rules-content p {
  margin-bottom:12px;
}

/* Settings */
.settings-container {
  background:var(--card-bg);
  border-radius:12px; padding:16px;
  box-shadow:0 2px 6px rgba(0,0,0,0.1);
}
.setting-card {
  margin-bottom:12px;
  background:var(--card-bg);
  padding:16px;
  border-radius:12px;
  box-shadow:0 2px 6px rgba(0,0,0,0.1);
}
.setting-card label {
  display:flex; justify-content:space-between;
  align-items:center; font-size:14px;
}
.save-btn {
  margin-top:8px; width:100%;
  background:var(--primary); color:#fff;
  border:none; border-radius:8px;
  cursor:pointer; transition:opacity .2s;
}
.save-btn:hover { opacity:0.9; }

.toggle-card label { justify-content:space-between; }

/* About & reset */
.about-section {
  margin-top:16px; text-align:center;
  font-size:13px;
}
.about-section a {
  color:var(--primary); text-decoration:none;
}
.about-section a:hover { text-decoration:underline; }
.reset-btn {
  width:100%; margin-top:8px;
  background:#e53935; color:#fff;
  border:none; padding:12px;
  border-radius:8px; cursor:pointer;
}

/* Toast */
.toast {
  position:fixed;
  bottom:20px; left:50%;
  transform:translateX(-50%) translateY(20px);
  background:rgba(0,0,0,0.8);
  color:#fff; padding:12px 24px;
  border-radius:24px; opacity:0;
  pointer-events:none;
  transition:opacity .3s,transform .3s;
  z-index:2000;
}
.toast.show {
  opacity:1;
  transform:translateX(-50%) translateY(0);
}

/* Dark mode */
:root.dark {
  --bg:#1e1e1e;
  --fg:#ececec;
  --card-bg:#2a2a2a;
}
.dark body { background:var(--bg); color:var(--fg); }
.dark .card, .dark .loan-card, .dark .bottom-sheet {
  background:var(--card-bg);
}
/* Centered modal-content for viewing rules */
.modal-content {
  background: var(--card-bg);
  border-radius: 12px;
  padding: 16px;
  max-width: 90%;
  margin: auto;
}

/* The rest of your style.css remains exactly as before */
